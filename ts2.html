<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>TS</title>
</head>
<body>
    <form id="searchForm" action="https://www.tohatsu.co.uk/DealerArea/cart/index.php" method="post">
        <input type="hidden" name="s" id="searchTerm">
    </form>
    <script>
        // Function to get the query parameter value
        function getQueryParam(param) {
            let urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(param);
        }

        // Function to submit the search
        function submitSearch(searchTerm) {
            document.getElementById("searchTerm").value = searchTerm;
            document.getElementById("searchForm").submit();
        }

        // Function to handle login and resume search
        function loginAndSearch() {
            let searchTerm = getQueryParam("search");
            if (searchTerm) {
                document.getElementById("searchTerm").value = searchTerm;
                document.getElementById("searchForm").submit();
            }
        }

        document.addEventListener("DOMContentLoaded", function() {
            // Check if user is logged in (you need to implement this logic)
            if (!isLoggedIn()) {
                // User is not logged in, show login dialog or modal
                alert("Please log in to continue."); // Example alert, replace with your modal or dialog
                // After the user logs in, call loginAndSearch()
                // Example: showLoginForm(); // Show your custom login form or modal
                // Upon successful login, call loginAndSearch() to resume search
            } else {
                // User is already logged in, proceed with search
                loginAndSearch();
            }
        });

        // Function to check if user is logged in (you need to implement this logic)
        function isLoggedIn() {
            // Example: Check if user is logged in based on your session or cookie logic
            return false; // Replace with your logic to check if user is logged in
        }
    </script>
</body>
</html>
