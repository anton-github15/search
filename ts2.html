<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>TS</title>
</head>
<body>
    <form id="searchForm" action="https://www.tohatsu.co.uk/DealerArea/cart/index.php" method="post">
        <input type="hidden" name="s" id="searchTerm">
    </form>
    <script>
        // Function to get the query parameter value
        function getQueryParam(param) {
            let urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(param);
        }

        // Function to submit the search
        function submitSearch(searchTerm) {
            document.getElementById("searchTerm").value = searchTerm;
            document.getElementById("searchForm").submit();
        }

        document.addEventListener("DOMContentLoaded", function() {
            // Check if user is logged in (you need to implement this logic)
            if (!isLoggedIn()) {
                // Redirect to login page
                window.location.href = "https://www.tohatsu.co.uk/DealerArea/";
            } else {
                // User is already logged in, proceed with search
                let searchTerm = getQueryParam("search");
                if (searchTerm) {
                    // Clear the search parameter from the URL
                    history.replaceState({}, document.title, window.location.pathname);
                    // Submit the original search term
                    submitSearch(searchTerm);
                }
            }
        });

        // Function to check if user is logged in (you need to implement this logic)
        function isLoggedIn() {
            // Example: Check if user is logged in based on your session or cookie logic
            return false; // Replace with your logic to check if user is logged in
        }
    </script>
</body>
</html>
